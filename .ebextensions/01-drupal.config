option_settings:
  aws:elasticbeanstalk:container:php:phpini:
    document_root: /web
    memory_limit: 1024M
    max_execution_time: 60

files:
  "/etc/nginx/conf.d/drupal.conf":
    mode: "000644"
    owner: root
    group: root
    content: |
      location / {
          try_files $uri $uri/ /index.php?$query_string;
      }
      
      location ~* \.(css|js|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
          expires 1y;
          add_header Cache-Control "public, immutable";
      }

container_commands:
  01_reload_nginx:
    command: "nginx -s reload"
    ignoreErrors: true